# 酒店管理系统项目复现指南

## 1. 项目概述

本指南详细说明了如何在其他计算机上复现完整的酒店管理系统项目，包括前端和后端的搭建与运行。

## 2. 系统要求

- **操作系统**：Windows 10/11、macOS、Linux
- **Node.js**：v16.0.0 或更高版本
- **MongoDB**：v6.0.0 或更高版本
- **Git**：用于版本控制

## 3. 环境搭建

### 3.1 安装 Node.js

1. **下载 Node.js**：
   - 访问 [Node.js 官网](https://nodejs.org/zh-cn/download/)
   - 下载并安装适合您操作系统的 LTS 版本

2. **验证安装**：
   ```bash
   node -v
   npm -v
   ```
   确保显示版本号，说明安装成功

### 3.2 安装 MongoDB

#### Windows 系统

1. **下载 MongoDB**：
   - 访问 [MongoDB 官网](https://www.mongodb.com/try/download/community)
   - 选择 Windows 版本并下载(直接下这个就ok：https://fastdl.mongodb.org/windows/mongodb-windows-x86_64-8.2.5-signed.msi)

2. **安装 MongoDB**：
   - 运行安装程序，选择 "Complete" 安装类型
   - 确保勾选 "Install MongoDB Compass" 选项

3. **配置环境变量**：
   - 将 MongoDB 的 bin 目录（默认为 `C:\Program Files\MongoDB\Server\版本号\bin`）添加到系统环境变量 PATH 中



#### macOS 系统

1. **使用 Homebrew 安装**：
   ```bash
   brew tap mongodb/brew
   brew install mongodb-community
   ```

2. **启动 MongoDB 服务**：
   ```bash
   brew services start mongodb-community
   ```

#### Linux 系统

1. **使用包管理器安装**（以 Ubuntu 为例）：
   ```bash
   wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -
   echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/6.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list
   sudo apt-get update
   sudo apt-get install -y mongodb-org
   ```

2. **启动 MongoDB 服务**：
   ```bash
   sudo systemctl start mongod
   sudo systemctl enable mongod
   ```

### 3.3 验证 MongoDB 安装

```bash
# 连接到 MongoDB 服务器
mongod

# 或使用新的 MongoDB Shell
mongosh
```

如果成功连接，说明 MongoDB 安装并运行正常。

## 4. 项目搭建

### 4.1 克隆项目代码

```bash
# 克隆仓库
git clone <仓库地址>

# 进入项目目录
cd <项目目录>
```

### 4.2 安装依赖

#### 前端依赖

```bash
# 进入前端目录
cd hotel-admin-pc

# 安装前端依赖
npm install
```

#### 后端依赖

```bash
# 进入后端目录
cd hotel-admin-pc/backend

# 安装后端依赖
npm install
```

### 4.3 配置环境变量

1. **创建 .env 文件**：
   - 在 `hotel-admin-pc/backend` 目录中创建 `.env` 文件
   - 复制以下内容并根据实际情况修改：

```env
# 服务器配置
PORT=5000

# MongoDB 连接字符串
MONGO_URI=mongodb://localhost:27017/hotel-management

# JWT 密钥
JWT_SECRET=your_jwt_secret_key_change_this_in_production
```

### 4.4 导入 MongoDB 数据

1. **使用 compass-connections.json**：
   - 项目中包含 `compass-connections.json` 文件，这是 MongoDB Compass 的连接配置文件
   - 打开 MongoDB Compass
   - 点击 "Connect" 按钮，选择 "Import Connection"
   - 选择项目中的 `compass-connections.json` 文件
   - 点击 "Connect" 连接到数据库

2. **手动导入数据**（可选）：
   - 如果使用 Compass 导入失败，可以手动创建数据库和集合
   - 连接到 MongoDB 后，创建名为 `hotel-management` 的数据库
   - 创建 `users` 和 `hotels` 集合

## 5. 运行项目

### 5.1 启动后端服务器

```bash
# 进入后端目录
cd hotel-admin-pc/backend

# 启动后端服务器
npm start
```

服务器启动后，您应该看到以下输出：
```
Server running on port 5000
MongoDB connected successfully
```

### 5.2 启动前端服务器

```bash
# 进入前端目录
cd hotel-admin-pc

# 启动前端开发服务器
npm run dev
```

前端服务器启动后，您应该看到类似以下输出：
```
VITE v7.3.1  ready in 318 ms

➜  Local:   http://localhost:5173/
```

### 5.3 访问应用

1. **打开浏览器**：
   - 访问 `http://localhost:5173/` 进入前端应用
   - 访问 `http://localhost:5000/api` 查看后端 API 信息

2. **注册账户**：
   - 点击 "Sign Up" 注册一个新账户
   - 选择角色（商户或管理员）

3. **登录系统**：
   - 使用注册的账户登录系统
   - 开始使用酒店管理功能

## 6. 项目结构

```
hotel-admin-pc/
├── public/            # 前端静态资源
├── src/               # 前端源代码
│   ├── api/           # API 客户端
│   ├── assets/        # 静态资源
│   ├── layout/        # 布局组件
│   ├── pages/         # 页面组件
│   ├── utils/         # 工具函数
│   ├── App.jsx        # 应用主组件
│   └── main.jsx       # 应用入口
├── backend/           # 后端代码
│   ├── config/        # 配置文件
│   ├── middleware/    # 中间件
│   ├── models/        # 数据模型
│   ├── routes/        # 路由
│   ├── server.js      # 后端服务器入口
│   └── .env           # 环境变量
├── compass-connections.json  # MongoDB Compass 连接配置
├── API文档.md         # API 文档
└── 项目复现指南.md     # 项目复现指南
```

## 7. 常见问题及解决方案

### 7.1 MongoDB 连接失败

- **问题**：`MongoDB connected failed`
- **解决方案**：
  1. 确保 MongoDB 服务正在运行
  2. 检查 `.env` 文件中的 `MONGO_URI` 是否正确
  3. 尝试重启 MongoDB 服务

### 7.2 端口被占用

- **问题**：`Port 5000 is already in use` 或 `Port 5173 is already in use`
- **解决方案**：
  1. 关闭占用端口的进程
  2. 修改 `.env` 文件中的 `PORT` 变量（后端）
  3. 前端端口会自动切换到可用端口

### 7.3 依赖安装失败

- **问题**：`npm install` 失败
- **解决方案**：
  1. 确保网络连接正常
  2. 尝试使用 `npm install --force`
  3. 清除 npm 缓存：`npm cache clean --force`

### 7.4 编译错误

- **问题**：前端或后端编译失败
- **解决方案**：
  1. 确保 Node.js 版本符合要求
  2. 检查代码是否有语法错误
  3. 重新安装依赖

## 8. 项目功能

### 8.1 核心功能

- **用户管理**：注册、登录、基于角色的权限控制
- **酒店管理**：创建、查看、编辑、删除酒店
- **房间管理**：添加、更新、删除房间类型
- **审核系统**：管理员审核酒店，商户查看审核状态

### 8.2 技术栈

- **前端**：React、Ant Design、Vite
- **后端**：Node.js、Express、MongoDB、Mongoose
- **认证**：JWT（JSON Web Tokens）
- **API**：RESTful API

## 9. 部署建议

### 9.1 开发环境

本指南中描述的步骤适用于开发环境。

### 9.2 生产环境（可选）

如果要部署到生产环境，建议：

1. **使用 PM2 管理进程**：
   ```bash
   npm install -g pm2
   pm2 start hotel-admin-pc/backend/server.js
   ```

2. **使用 Nginx 作为反向代理**：
   - 配置 Nginx 转发请求到前端和后端

3. **使用 MongoDB Atlas**：
   - 考虑使用 MongoDB Atlas 云服务，无需本地安装 MongoDB

4. **配置 HTTPS**：
   - 使用 Let's Encrypt 等服务获取 SSL 证书

## 10. 故障排除

### 10.1 日志查看

- **后端日志**：在启动后端的终端中查看
- **前端日志**：在浏览器开发者工具的 Console 中查看

### 10.2 调试技巧

- 使用 `console.log()` 在代码中添加调试信息
- 使用 VS Code 的调试功能
- 检查网络请求和响应

## 11. 总结

本指南提供了完整的项目复现步骤，从环境搭建到运行项目。如果按照步骤操作，您应该能够成功在其他计算机上复现完整的酒店管理系统。

如果遇到任何问题，请参考 "常见问题及解决方案" 部分，或查阅相关技术文档。

---

**注意**：本项目仅供学习和开发使用，在生产环境中部署时请确保修改所有敏感信息，如 JWT 密钥等。